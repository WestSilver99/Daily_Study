# 운영체제

<hr/>

## 컴퓨터의 기본 구성

<br>

### 폰노이만 구조

CPU, 메모리 입출력정치, 저장장치가 버스로 연결된 구조
프로그램은 하드디스크와 같은 저장 장치에 담겨 있으나, 폰노이먼 구조의 가장 큰 특징은 저장장치에 있는 프로그램을 실행하려면 프로그램이 메모리에 올라와야 한다.

폰노이만 병목 현상
폰노이만 vs 하바드 구조
현대에 이르러서는 CPU의 외부적으로는 폰 노이만 구조를, 내부적으로는 하버드 구조를 적용하여 속도를 향상시킨 것이 많다.
<br>

### 요리사 모형

운영체제의 여러 가지 현상에 대한 이해를 돕기 위한 것
요리사->CPU, 도마->메모리, 보관 창고->저장장치에 비유

데이터의 크기 단위
데이터의 기본 표시 단위는 bit, 8bit를 묶어서 byte

### 클록, 헤르쯔

- 클록은 컴퓨터에서 일정한 박자를 만들어 내는 것, 클록에 의해 일정 간격으로 만들어지는 tick을 pulse 혹은 clock tick.
- 클록이 일정 간격으로 펄스를 만들면

### 클럭속도

- 클럭 속도가 3.62GHz인 CPU는 초당 36억 사이클을 실행
- 경우에 따라 단일 클록 주기에서 여러 명령이 완료된다. 다른 경우에는 하나의 명령이 여러 클록 주기에 걸쳐 처리될 수 있다.

### 동기식과 비독기식

- 동기식: 버스가 가지고 있는 클록들 기준으로 정해진 시간에 데이터를 전송하는 방법으로 인터페이스 논리 회로가 간단하며 빠르다는 장점이 있다.<br>
  하지만 버스 클록의 주기가 가장 느린 버스 동작의 소요시간을 기준으로 시간이 결정되기 때문에 대기하는 버스 동작들이 생기므로 시간낭비가 발생.

- 비동기식: 데이터를 주고 받을 준비가 되었는지 확인하는 HandShaking 프로토콜을 사용하여 수신준비가 확인되며 바로 데이터를 전송하는 방식.<br>
  시간낭비는 적지만 회로구성이 복잡하고, HandShaking을 하기 때문에 동기식에 비해서는 느린편.

### 시스템 버스와 CPU 버스

- 시스템 버스는 메모리와 주변장치를 연결하는 버스로, 메인보드의 동작 속도를 의미하며 FSB 혹은 전면 버스라고 부름
- CPU 버스는 CPU 내부의 다양한 장치를 연결하는 것으로 BSB(Back Side Bus) 혹은 후면 버스라 부름
- BSB 속도는 CPU 클록과 같고 FSB보다 훨씬 빠름

### 기억장치 액세스 동작의 시간 흐름도

- 기억장치 쓰기 동작에서 CPU가 주소와 데이터를 보낸 순간부터 저장이 완료될 때 까지의 시간이다.
- 기억장치 읽기 동작에서 주소를 해독하는 데 걸리는 시간과 선택된 기억소자들로부터 데이터를 읽는 데 걸리는 시간을 합한 시간이다.

### 프로그래밍과 언어

- 컴퓨터 프로그래밍을 만드는 것을 프로그래밍, 이때 사용하는 언어가 프로그래밍 언어
- 컴퓨터가 이해할 수 있는 기계어로 0과 1의 이진수로 이루어져 사람이 이해하기 어려움
- 기계어를 사람들이 이해할 수 있는 문자 형태로 바꾼 것이 어셈블리어
- 어셈블리어처럼 기계어는 아니지만 일반인이 사용하기 어려운 언어를 저급언어
- if나 for 같이 일반인이 이해할 수 있는 단어로 만든 언어를 고급언어
- 기계어와 어셈블리어를 제외한 대부분의 언어가 고급언어
- 고급언어를 기계어로 번역하는 과정을 컴파일, 컴파일을 담당하는 프로그램을 컴파일러
- 컴파일러가 소스코드를 번역하여 기계어로 이루어진 실행 파일을 만들면 컴퓨터가 실행하여 작업을 시작함
- 소스코드를 기계어로 번역하는 다른 방법인 인터프리터는 소스코드를 한 번에 한 문장씩 번역하며 실행.
- 인터프리티는 실행 파일을 따로 만들지 않아 편하지만 코드에 잘못된 부분이 있는지 파악하기 어렵고, 반복 작업을 하나로 합치기 어려움.

### 필수 자료구조

##### 큐와 스택

- 큐는 먼저 들어온 자료가 먼저 처리되는 First In, First Out, 한쪽으로 자료를 넣으면 반대쪽으로 나오는 구조
- 스택은 가장 나중에 들어온 자료가 가장 먼저 처리되는 First in, Last Out, 순서가 뒤집혀저 나오고 한쪽으로만 입출력이 이루어짐.

##### 배열과 연결 리스트

- 배열은 형태가 같은 자료를 나열하여 메모리에 연속으로 저장하는 것으로 구현은 간단하지만 공간의 삽입과 삭제 같은 관리가 어려운 게 단점
- 연결 리스트는 데이터를 포인터로 연결해 데이터를 중간에 삽입하는 것도 가능
- 배열 형태의 테이블은 크기가 어느 정도 정해진 메모리나 파일 관리에 사용, 연결 리스트는 데이터의 삽입과 삭제가 빈번한 테이블에 주로 사용
- 큐를 구현할 때도 연결 리스트를 사용하며 편리

<hr/>

## CPU와 메모리

<br>

### CPU의 구성과 동작

- 산술논리 연산장치: 데이터의 덧셈, 뺄셈, 곱셈, 나눗셈 같은 산술 연산과 AND, OR 같은 논리 연산을 수행
- 제어장치: CPU에서 작업을 지시하는 부분
- 레지스터: 작업에 필요한 데이터를 CPU 내부에 보관하는 곳

### CPU의 명령어 처리 과정

- CPU에서는 산술논리 연산장치, 제어장치, 레지스터들이 협업하여 작업 처리
- MAr <- PC: PC가 가리키는 기억장치의 위치를 MAR에 저장시켜준다. PC의 값이 외부의 주소버스로 가기 위해서는 MAR을 거쳐야 한다.
- MBR <- M[MAR], PC <- PC+1: MAR을 거쳐서 외부로 나가고, 메모리(M)의 값을 찾아 데이터 버스를 타고 MBR에 저장시켜준다. 그런다음 PC 값은 1 증가시켜준다.
- IR <- MBR: MBR이 해석되기 위해서 IR을 거쳐야 한다.

##### 동작과정

- T0: MR <- IR(Addr)
- T1: MBR <- M[MAR]
- T2: AC <- AC+MBR

### 레지스터의 종류

- 데이터 레지스터: 메모리에서 가져온 데이터를 임시 보관. 일반 레지스터 또는 범용 리지스터라고 부름
- 주소 레지스터: 데이터 또는 명령어가 저장된 메모리의 주소를 저장하는 레지스터
- 프로그램 카운터: 다음에 실행할 명령어의 위치를 저장
- 명령어 레지스터: 현재 실행 중인 명령어를 저장
- 메모리 주소 레지스터: 메모리 관리자가 접근해야 할 메모리의 주소를 저장
-
-

### 버스의 종류 및 특징

- 제어 버스: 제어장치와 연결된 버스로, CPU가 메모리와 주변장치에 제어 신호를 보내기 위해 사용한다. 메모리와 주변장치에서도 작업이 완료되거나 오류가 발생하면 제어 신호를 보내기 때문에 양방향이다.
- 주소 버스
- 데이터 버스

### CPU 비트의 의미

- 32bit CPU, 64bit CPU에서 32bit, 64bit는 CPU가 한 번에 처리할 수 있는 데이터의 최대 크기
- 32bit CPU는 메모리에서 데이터를 읽거나 쓸 때 한 번에 최대 32bit를 처리 할 수 있으며 레지스터 크기도 32bit, 버스 대역폭도 32bit
- 버스의 대역폭은 한 번에 전달할 수 있는 데이터의 최대 크기로 CPU가 한 번에 처리할 수 있는 데이터의 크기와 같음.
- 버스의 대역폭, 레지스터의 크기, 메모리에 한 번에 저장할 수 있는 데이터의 크기는 항상 같음.
- CPU가 한 번에
-

### 메모리의 종류

#### 휘발성 메모리

- DRAM
- SRAM

#### 비휘발성 메모리

- 플래시 메모리
- SSD: In- place update 처리가 어렵다는 단점

### 롬의 종류

- 마스크 롬
- PROM
- EPROM

### 메모리 보호

- 시분할 기법을 사용하는 현대의 운영체제는 여러 프로그램을 동시에 실행하므로 메모리 부호가 매우 중요
- 사용자 프로세스가 CPU를 차지해 작업을 진행하면 운영체제 작업이 중단되는데 사용자 작업으로부터 메모리를 보호하려면 하드웨어의 도움이 필요
- 메모리를 보호하기 위해
-
-
-

### 부팅

- 컴퓨터를 켰을 때 운영체제를 메모리에 올리는 과정

<br>

## 컴퓨터 성능 향상 기술

### 버퍼

- 속도에 차이가 있는 두 장치 사이에서 그 차이를 완화하는 역할을 하는 장치
- 일정량의 데이터를 모아 옮김으로써 속도의 차이를 완화

### 스풀

- CPU와 입출력장치가 독립적으로 동작하도록 고안된 소프트웨어적인 버퍼
- [ex] 스풀러

### 캐시

- 메모리와 CPU 간의 속도 차이를 완화하기 위해 메모리의 데이터를 미리 가져와 저장해두는 임시 장소
- 필요한 데이터를 모아 한꺼번에 전달하는 버퍼의 일종으로 CPU가 앞으로 사용할 것으로 예상되는 데이터를 미리 가져다놓음
- CPU는 메모리에 접근해야 할 때 캐시를 먼저 방문하여 원하는 데이터가 있는지 찾아봄

### 캐시의 구조

- 캐시 히트: 캐시에서 원하는 데이터를 찾는 것으로, 그 데이터를 바로 사용
- 캐시 미스: 캐시에 원하는 데이터 없으면 메모리로 가서 찾음
- 캐시 적중률: 캐시 히트 되는 비율로 일반적인 컴퓨터의 캐시 적중률은 약 90%

### 버퍼의 쓰기

#### 즉시 쓰기

- 캐시에 있는 데이터가 변경되면 이를 즉시 메모리에 반영하는 방식
- 메모리와의 빈번한 데이터 전송으로 인해 성능이 느려짐
- 메모리의 최신 값이 항상 유지되기 때문에 급작스러운 정전에도 데이터를 잃어버리지 않음

#### 지연 쓰기

- 캐시에 있는
- 카피백이라고도 함
- 메모리와의 데이터 전송 횟수가 줄어들어

### L1 캐시와 L2 캐시

- 캐시는 명령어와 데이터 구분 없이 모든 자료를 가져오는 일반 캐시, 명령어와 데이터를 구분하여 가져오는 특수 캐시로 구분.
- 일반 캐시: 메모리와 연결되기 때문에 L2(Level 2) 캐시라고 부름
- 특수 캐시:

### 저장장치의 계층 구조

- 개념: 속도가 빠르고 값이 비싼 저장장치를 CPU 가까운 쪽에 두고, 값이 싸고 용량이 큰 저장장치를 반대쪽에 배치해 적당한 가격으로 빠른 속도와 큰 용량을 동시에 얻는 방법
- 이점:

### 인터럽트

#### 폴링 방식

- CPU가 직접 입출력장치에서 데이터를 가져오거나 내보내는 방식
- CPU가 입출력장치의 상태를 주기적으로 검사하여 일정한 조건을 만족할 때 데이터를 처리
- CPU가 명령어 해석과 실행이라는 본래 역할 외에 모든 입출력까지 관여하므로 작업 효율이 떨어짐

#### 인터럽트 방식

- 입출력 관리자가 대신 입출력을 해주는 방식
- CPU의 작업과 저장장치의 데이터 이동을 독립적으로 운영
- 데이터의 입출력이 이루어지는 동안 CPU가 다른작업을 할 수 있음.

#### 인터럽트

-

#### 인터럽트 번호

- 많은 주변장치 중 어떤 것의 작업이 끝났는지를 CPU에 알려주기 위해 사용하는 번호
- 윈도우 운영체제에서는 IRQ라 부름

#### 인터럽트 벡터

- 여러 개의 입출력 작업을 한꺼번에 처리하기 위해

### 직접 메모리 접근

- 입출력 관리자가 CPU의 허락 없이 메모리에 접근할 수 있는 권한
- 메모리는 CPU 작업 공간이지만, 데이터 전송을 지시받은 입출력 관리자는 직접 메로이 접근 권한이 있어야만 작업을 처리할 수 있음

### 메모리 맵 입출력

- 메모리의 일정 공간을 입출력에 할당하는 기법

### 사이클 훔치기

- CPU와 직접 메모리 접근이 동시에 메모리에 접근하면 보통 CPU가 메모리 사용 권한을 양보
- CPU의 작업 속도보다 입출력장치의 속도가 느리기 때문에 직접 메모리 접근.........

<hr/>

## 멀티 프로세싱

### 멀티 프로세서 시스템

- 컴퓨터의 성능을 높이기 위해 프로세서를 여러 개 설치하여 사용하는 시스템
- 프로세서마다 레지스터와 캐시를 가지며, 모든 프로세서가 시스템 버스를 통여 메인메모리를 공유
-

### 멀티 코어 시스템

- 기존 시스템을 유지한 채 멀티 프로세싱을 할 수 있게 하는 시스템
- 하나의 칩에 CPU의 핵심이 되는 코어를 여러 개 만들어 여러 작업을 동시에 처리
- 듀얼코어는 CPU의 중요 기능을 담당하는 코어가 2개, 쿼드코어는 4개.

### CPU 멀티스레드

### 명령어 병렬 처리

- 하나의 코어에서 여러 개의 명령어를 동시에 처리하는 것

### CPU 멀티스레드

- 여러개의 스레드를 동시에 처리하는 방법
- 스레드란 CPU가 처리할 수 있는 작업의 단위

### 현대의 CPU

- 하나의 칩에 멀티코어와 명령어 병렬처리 기능을 한꺼번에 구현
- 코어가 4개이지만

### 파이프라인 기법

- 일반적으로는 한 명령을
- 단점: 데어터의 의존성

### 슈퍼스칼라 기법: 코어를 여러 개 구성(오늘날의 CPU)

- 파이프라인 기법에서는 한 클록마다 하나의 명령어를 실행하지만, 슈퍼파이프라인 기법에서는 파이프라인의 각 단계를 세분.......

### CPU 관련 통용 법칙

#### 무어의 법칙

-

#### 암달의 법칙

-
